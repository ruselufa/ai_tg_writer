#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ AI TG Writer
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./stop_app.sh

echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ AI TG Writer..."

# –ò—â–µ–º –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ai_tg_writer
PIDS=$(pgrep -f "ai_tg_writer")
if [ -n "$PIDS" ]; then
    echo "–ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å—ã: $PIDS"
    kill -9 $PIDS
    echo "‚úÖ –ü—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
else
    echo "‚ÑπÔ∏è  –ü—Ä–æ—Ü–µ—Å—Å—ã ai_tg_writer –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç 8080
if lsof -i :8080 >/dev/null 2>&1; then
    echo "‚ö†Ô∏è  –ü–æ—Ä—Ç 8080 –≤—Å–µ –µ—â–µ –∑–∞–Ω—è—Ç. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞..."
    lsof -ti :8080 | xargs kill -9
    echo "‚úÖ –ü–æ—Ä—Ç 8080 –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω"
else
    echo "‚úÖ –ü–æ—Ä—Ç 8080 —Å–≤–æ–±–æ–¥–µ–Ω"
fi

echo "üéâ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
