# üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

## üéØ –û–±–∑–æ—Ä

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –¥—Ä—É–≥–∏—Ö –ü–ö (–∏–∑ –¥–æ–º–∞, –æ—Ñ–∏—Å–∞ –∏ —Ç.–¥.).

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –û–±–Ω–æ–≤–ª—è–µ–º Docker Compose

–§–∞–π–ª `docker-compose.yml` —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ:

```yaml
# Grafana - –¥–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ IP
grafana:
  ports:
    - "0.0.0.0:3000:3000"

# Prometheus - –¥–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ IP  
prometheus:
  ports:
    - "0.0.0.0:9090:9090"
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose down

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
docker-compose up -d
```

### 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 8080:

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µtus.
./start_app.sh
```

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ

### 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ifconfig | grep "inet " | grep -v 127.0.0.1
# –∏–ª–∏
ip addr show | grep "inet " | grep -v 127.0.0.1
```

### 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# Ubuntu/Debian
sudo ufw allow 3000  # Grafana
sudo ufw allow 9090  # Prometheus
sudo ufw allow 8080  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=3000/tcp
sudo firewall-cmd --permanent --add-port=9090/tcp
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --reload
```

### 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–æ—É—Ç–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞ NAT, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤:
- 3000 ‚Üí 3000 (Grafana)
- 9090 ‚Üí 9090 (Prometheus)  
- 8080 ‚Üí 8080 (–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

## üì± –î–æ—Å—Ç—É–ø —Å –¥—Ä—É–≥–∏—Ö –ü–ö

### 1. Grafana (–î–∞—à–±–æ—Ä–¥—ã)

**URL**: `http://YOUR_SERVER_IP:3000`

**–õ–æ–≥–∏–Ω**: `admin`  
**–ü–∞—Ä–æ–ª—å**: `admin`

**–î–∞—à–±–æ—Ä–¥—ã**:
- "AI TG Writer Monitoring - Fixed" - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∞—à–±–æ—Ä–¥
- "AI TG Writer - Business Metrics" - –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏

### 2. Prometheus (–ú–µ—Ç—Ä–∏–∫–∏)

**URL**: `http://YOUR_SERVER_IP:9090`

**–§—É–Ω–∫—Ü–∏–∏**:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

### 3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (API)

**URL**: `http://YOUR_SERVER_IP:8080`

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
- `/metrics` - –º–µ—Ç—Ä–∏–∫–∏ Prometheus
- `/health` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `/test-metrics` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```bash
# –í Grafana: Settings ‚Üí Users ‚Üí Admin ‚Üí Change Password
# –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å: –≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx —Å SSL
sudo apt install nginx certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com
```

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP

```bash
# –í nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
location / {
    allow 192.168.1.0/24;  # –í–∞—à–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å
    allow YOUR_HOME_IP;     # –í–∞—à –¥–æ–º–∞—à–Ω–∏–π IP
    deny all;
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### 1. Grafana Mobile App

- **iOS**: Grafana Mobile
- **Android**: Grafana Mobile
- **URL**: `http://YOUR_SERVER_IP:3000`
- **–õ–æ–≥–∏–Ω**: `admin` / `admin`

### 2. –í–µ–±-–±—Ä–∞—É–∑–µ—Ä

–õ—é–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Grafana.

## üö® –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ Grafana

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Alerting** ‚Üí **Alert Rules**
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email, Slack, Telegram)

### 2. –ü—Ä–∏–º–µ—Ä—ã –∞–ª–µ—Ä—Ç–æ–≤

```yaml
# –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU
- alert: HighCPUUsage
  expr: 100 - (avg by(instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
  for: 5m
  labels:
    severity: warning
  annotations:
    summary: "High CPU usage detected"

# –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ API
- alert: HighAPIErrors
  expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.1
  for: 2m
  labels:
    severity: critical
  annotations:
    summary: "High API error rate detected"
```

## üîß Troubleshooting

### 1. –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Grafana

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep grafana

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker logs ai_tg_writer_grafana

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç
netstat -tlnp | grep 3000
```

### 2. –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º Prometheus
curl http://YOUR_SERVER_IP:9090/api/v1/targets

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
curl http://YOUR_SERVER_IP:8080/metrics
```

### 3. –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
docker stats

# –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–∞–º—è—Ç—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down
docker system prune -a
docker-compose up -d
```

## üì± –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

### –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫–ª–∞–¥–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

1. **Grafana**: `http://YOUR_SERVER_IP:3000`
2. **Prometheus**: `http://YOUR_SERVER_IP:9090`
3. **–ú–µ—Ç—Ä–∏–∫–∏**: `http://YOUR_SERVER_IP:8080/metrics`
4. **–ó–¥–æ—Ä–æ–≤—å–µ**: `http://YOUR_SERVER_IP:8080/health`

### –ú–æ–±–∏–ª—å–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã:

- **Grafana Dashboard** - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∞—à–±–æ—Ä–¥
- **Business Metrics** - –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
- **System Health** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ –º–∏—Ä–∞! üåç

**–ù–µ –∑–∞–±—É–¥—å—Ç–µ**:
- –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –°–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º—É
