# üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI TG Writer

## üìä –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–Ω–µ–ª–∏

### üî• CPU Usage (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞)
- **–ú–µ—Ç—Ä–∏–∫–∞**: `100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 0-100%
- **–ê–ª–µ—Ä—Ç—ã**: > 80% - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, > 95% - –∫—Ä–∏—Ç–∏—á–Ω–æ

### üß† Memory Usage (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏)
- **–ú–µ—Ç—Ä–∏–∫–∞**: `(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAM
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 0-100%
- **–ê–ª–µ—Ä—Ç—ã**: > 85% - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, > 95% - –∫—Ä–∏—Ç–∏—á–Ω–æ

### üíæ Disk Usage (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞)
- **–ú–µ—Ç—Ä–∏–∫–∞**: `100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"})`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
- **–î–∏–∞–ø–∞–∑–æ–Ω**: 0-100%
- **–ê–ª–µ—Ä—Ç—ã**: > 80% - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, > 90% - –∫—Ä–∏—Ç–∏—á–Ω–æ

### üåê Network I/O (–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫)
- **–ú–µ—Ç—Ä–∏–∫–∏**: 
  - `rate(node_network_receive_bytes_total[5m])` - –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
  - `rate(node_network_transmit_bytes_total[5m])` - –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- **–ï–¥–∏–Ω–∏—Ü—ã**: Bytes/sec

### ‚öñÔ∏è Load Average (–°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞)
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `node_load1` - –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 1 –º–∏–Ω—É—Ç—É
  - `node_load5` - –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç
  - `node_load15` - –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 15 –º–∏–Ω—É—Ç
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω—é—é –Ω–∞–≥—Ä—É–∑–∫—É —Å–∏—Å—Ç–µ–º—ã
- **–ê–ª–µ—Ä—Ç—ã**: > –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### üíø Disk I/O (–î–∏—Å–∫–æ–≤—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥)
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `rate(node_disk_read_bytes_total[5m])` - —á—Ç–µ–Ω–∏–µ —Å –¥–∏—Å–∫–∞
  - `rate(node_disk_written_bytes_total[5m])` - –∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –¥–∏—Å–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ï–¥–∏–Ω–∏—Ü—ã**: Bytes/sec

### üîÑ Process Count (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
- **–ú–µ—Ç—Ä–∏–∫–∏**:
  - `node_procs_running` - –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
  - `node_procs_blocked` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
- **–ê–ª–µ—Ä—Ç—ã**: > 1000 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### ‚è∞ System Uptime (–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã)
- **–ú–µ—Ç—Ä–∏–∫–∞**: `node_boot_time_seconds`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- **–§–æ—Ä–º–∞—Ç**: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2 days ago")

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker-compose up -d
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
docker-compose ps
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ node_exporter:
```bash
curl http://localhost:9100/metrics | grep node_cpu_seconds_total | head -3
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus:
```bash
curl http://localhost:9090/api/v1/targets | grep node_exporter
```

## üìà –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞—à–±–æ—Ä–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana: http://localhost:3000
2. –õ–æ–≥–∏–Ω: `admin`, –ü–∞—Ä–æ–ª—å: `admin`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∞—à–±–æ—Ä–¥ "AI TG Writer Monitoring - Fixed"
4. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏:

#### CPU Usage:
- **Warning**: > 80%
- **Critical**: > 95%

#### Memory Usage:
- **Warning**: > 85%
- **Critical**: > 95%

#### Disk Usage:
- **Warning**: > 80%
- **Critical**: > 90%

#### Load Average:
- **Warning**: > –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU
- **Critical**: > –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU * 2

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã Prometheus

### –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ CPU:
```promql
topk(5, rate(node_cpu_seconds_total[5m]))
```

### –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –ø–∞–º—è—Ç–∏:
```promql
topk(5, node_memory_MemAvailable_bytes)
```

### –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º:
```promql
rate(node_network_receive_bytes_total[5m]) + rate(node_network_transmit_bytes_total[5m])
```

### –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ —Ñ–∞–π–ª–æ–≤—ã–º —Å–∏—Å—Ç–µ–º–∞–º:
```promql
100 - ((node_filesystem_avail_bytes * 100) / node_filesystem_size_bytes)
```

## üéØ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
1. **CPU Usage** - –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 80%
2. **Memory Usage** - –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 85%
3. **Disk Usage** - –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 80%
4. **Load Average** - –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä
5. **Network I/O** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
6. **Disk I/O** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:
- **–í—ã—Å–æ–∫–∏–π CPU** + **–í—ã—Å–æ–∫–∏–π Load** = –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- **–í—ã—Å–æ–∫–∏–π Memory** + **–ú–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** = –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏
- **–í—ã—Å–æ–∫–∏–π Disk I/O** + **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫** = –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∏—Å–∫–æ–º
- **–í—ã—Å–æ–∫–∏–π Network I/O** = –≤–æ–∑–º–æ–∂–Ω–∞—è –∞—Ç–∞–∫–∞ –∏–ª–∏ —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ node_exporter**:
   ```bash
   curl http://localhost:9100/metrics | grep node_cpu
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Prometheus**:
   ```bash
   curl http://localhost:9090/api/v1/targets
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
   ```bash
   docker-compose logs node_exporter
   docker-compose logs prometheus
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã**:
   ```bash
   docker-compose restart node_exporter prometheus grafana
   ```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- ‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: HTTP –∑–∞–ø—Ä–æ—Å—ã, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–ª–∞—Ç–µ–∂–∏, –æ—à–∏–±–∫–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞**: CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å, –ø—Ä–æ—Ü–µ—Å—Å—ã, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- ‚úÖ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –ì—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ **–ê–ª–µ—Ä—Ç—ã**: –ì–æ—Ç–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
