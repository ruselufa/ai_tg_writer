# üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—ã–ª–æ –º–Ω–æ–≥–æ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö –ª–æ–≥–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É, —á—Ç–æ –∑–∞—Å–æ—Ä—è–ª–æ –≤—ã–≤–æ–¥ –∏ —Å–Ω–∏–∂–∞–ª–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å 5 —É—Ä–æ–≤–Ω—è–º–∏:

```go
// –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
const (
    LevelDebug = "DEBUG"  // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    LevelInfo  = "INFO"   // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    LevelWarn  = "WARN"   // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
    LevelError = "ERROR"  // –û—à–∏–±–∫–∏
    LevelSystem = "SYSTEM" // –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
)
```

### 2. **–§—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

```go
// Debug - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ LOG_LEVEL=DEBUG
monitoring.Debug("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: %s", data)

// Info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
monitoring.Info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å %d –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ", userID)

// Warn - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
monitoring.Warn("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏")

// Error - –æ—à–∏–±–∫–∏ (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
monitoring.Error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: %v", err)

// System - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)
monitoring.System("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É %s", port)
```

### 3. **–ú–µ—Ç—Ä–∏–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus:

```go
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
log_messages_total{level="info", component="bot"}
log_messages_total{level="error", component="payment"}

// –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_interactions_total{type="message", user_tariff="premium"}
user_interactions_total{type="voice", user_tariff="free"}

// –®–∞–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
processing_steps_total{step="whisper", status="success"}
processing_steps_total{step="deepseek", status="error"}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### **–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ç–æ–ª—å–∫–æ INFO –∏ –≤—ã—à–µ)
export LOG_LEVEL=INFO

# –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–≤—Å–µ –ª–æ–≥–∏)
export LOG_LEVEL=DEBUG

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
export LOG_LEVEL=ERROR
```

### **–í Docker Compose**

```yaml
environment:
  - LOG_LEVEL=INFO
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

### **–í Grafana**

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º**:
   ```promql
   rate(log_messages_total[5m]) * 60
   ```

2. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
   ```promql
   rate(user_interactions_total[5m]) * 60
   ```

3. **–®–∞–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏**:
   ```promql
   rate(processing_steps_total[5m]) * 60
   ```

### **–ê–ª–µ—Ä—Ç—ã**

```yaml
# –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫
- alert: HighErrorRate
  expr: rate(log_messages_total{level="error"}[5m]) > 0.1
  for: 2m
  labels:
    severity: warning
  annotations:
    summary: "High error rate detected"

# –ú–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- alert: HighUserActivity
  expr: rate(user_interactions_total[5m]) > 100
  for: 1m
  labels:
    severity: info
  annotations:
    summary: "High user activity detected"
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### **1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ª–æ–≥–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚úÖ Debug –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã

### **2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus
- ‚úÖ –î–∞—à–±–æ—Ä–¥—ã –≤ Grafana
- ‚úÖ –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### **3. –û—Ç–ª–∞–¥–∫–∞**
- ‚úÖ –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### **–ë—ã–ª–æ:**
```go
log.Printf("Callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è %d: %s", userID, data)
log.Printf("‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: %v", err)
log.Printf("‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ")
```

### **–°—Ç–∞–ª–æ:**
```go
monitoring.Debug("Callback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è %d: %s", userID, data)
monitoring.RecordUserInteraction("callback", "premium")

monitoring.Error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: %v", err)
monitoring.RecordLogMessage("error", "bot")

monitoring.Info("–£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ")
monitoring.RecordProcessingStep("complete", "success")
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- 354 —Å—Ç—Ä–æ–∫–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ú–Ω–æ–≥–æ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø–æ –ª–æ–≥–∞–º
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus
- –î–∞—à–±–æ—Ä–¥—ã –≤ Grafana
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–í –∫–æ–¥–µ:**
```go
// –ò–º–ø–æ—Ä—Ç
import "your-project/internal/monitoring"

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
monitoring.Info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å %d –Ω–∞—á–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫—É", userID)
monitoring.RecordUserInteraction("voice", "premium")

// –û—à–∏–±–∫–∏
monitoring.Error("–û—à–∏–±–∫–∞ API: %v", err)
monitoring.RecordLogMessage("error", "api")
```

### **–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**
```bash
# –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –ª–æ–≥–∏
export LOG_LEVEL=INFO

# –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
export LOG_LEVEL=DEBUG
```

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞, –∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º! üöÄ
