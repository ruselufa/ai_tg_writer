# üìä –ë–∏–∑–Ω–µ—Å-–¥–∞—à–±–æ—Ä–¥ AI TG Writer

## üéØ –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–Ω **–æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫** —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–æ—Ç–∞ –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –∏ –ø–ª–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–∞—Ö.

## üìà –ü–∞–Ω–µ–ª–∏ –¥–∞—à–±–æ—Ä–¥–∞

### 1. **User Conversions** - –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `rate(user_conversions_total[5m]) * 60`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ç–∞—Ä–∏—Ñ–∞–º–∏ (free ‚Üí basic ‚Üí premium)
- **–§–æ—Ä–º–∞—Ç**: –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –º–∏–Ω—É—Ç—É

### 2. **Retention Rate** - –£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `user_retention_rate`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Ü–µ–Ω—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- **–§–æ—Ä–º–∞—Ç**: –î–Ω–µ–≤–Ω–æ–µ, –Ω–µ–¥–µ–ª—å–Ω–æ–µ, –º–µ—Å—è—á–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ

### 3. **ARPU** - –°—Ä–µ–¥–Ω–∏–π –¥–æ—Ö–æ–¥ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ú–µ—Ç—Ä–∏–∫–∞**: `user_arpu`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ä–µ–¥–Ω–∏–π –¥–æ—Ö–æ–¥ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- **–§–æ—Ä–º–∞—Ç**: RUB

### 4. **Churn Rate** - –û—Ç—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `user_churn_rate`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- **–§–æ—Ä–º–∞—Ç**: –î–Ω–µ–≤–Ω—ã–π, –Ω–µ–¥–µ–ª—å–Ω—ã–π, –º–µ—Å—è—á–Ω—ã–π –æ—Ç—Ç–æ–∫

### 5. **Session Duration by Tariff** - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–ú–µ—Ç—Ä–∏–∫–∞**: `histogram_quantile(0.95/0.50, rate(user_session_duration_seconds_bucket[5m]))`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: 95-–π –∏ 50-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–π
- **–§–æ—Ä–º–∞—Ç**: –°–µ–∫—É–Ω–¥—ã

### 6. **Bot Usage - Free vs Paid** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞
- **–ú–µ—Ç—Ä–∏–∫–∞**: `rate(telegram_messages_received_total{user_tariff="free/premium"}[5m]) * 60`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–§–æ—Ä–º–∞—Ç**: –°–æ–æ–±—â–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç—É

### 7. **Voice Messages - Free vs Paid** - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ú–µ—Ç—Ä–∏–∫–∞**: `rate(voice_messages_processed_total{user_tariff="free/premium"}[5m]) * 60`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–§–æ—Ä–º–∞—Ç**: –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç—É

### 8. **Active Users - Free vs Paid** - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–ú–µ—Ç—Ä–∏–∫–∞**: `telegram_active_users{user_tariff="free/premium"}`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–§–æ—Ä–º–∞—Ç**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 9. **Feature Usage - Free vs Paid** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `rate(feature_usage_total{user_tariff="free/premium"}[5m]) * 60`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–§–æ—Ä–º–∞—Ç**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∏–Ω—É—Ç—É

### 10. **User Satisfaction - Free vs Paid** - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- **–ú–µ—Ç—Ä–∏–∫–∞**: `user_satisfaction_score{user_tariff="free/premium"}`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ü–µ–Ω–∫–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–§–æ—Ä–º–∞—Ç**: –û—Ü–µ–Ω–∫–∞ –æ—Ç 1 –¥–æ 5

### 11. **Support Tickets - Free vs Paid** - –û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- **–ú–µ—Ç—Ä–∏–∫–∞**: `rate(support_ticket_volume_total[5m]) * 60`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤ –º–∏–Ω—É—Ç—É
- **–§–æ—Ä–º–∞—Ç**: –û–±—Ä–∞—â–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç—É

## üÜï –ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ (–±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è)

### 1. **Bot Usage Rate** - –°–∫–æ—Ä–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞
- **–ú–µ—Ç—Ä–∏–∫–∞**: `bot_usage_rate`
- **–õ–µ–π–±–ª—ã**: `user_tariff` (free, premium), `action_type` (message, voice, button_click)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∫–æ—Ä–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –≤ –º–∏–Ω—É—Ç—É –ø–æ —Ç–∏–ø–∞–º –¥–µ–π—Å—Ç–≤–∏–π
- **–¢–∏–ø**: Gauge (–Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è)

### 2. **Feature Usage Rate** - –°–∫–æ—Ä–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∞**: `feature_usage_rate`
- **–õ–µ–π–±–ª—ã**: `user_tariff` (free, premium), `feature` (voice_processing, payment, subscription)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∫–æ—Ä–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–¢–∏–ø**: Gauge (–Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è)

### 3. **User Engagement Rate** - –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–µ—Ç—Ä–∏–∫–∞**: `user_engagement_rate`
- **–õ–µ–π–±–ª—ã**: `user_tariff` (free, premium), `engagement_type` (active, returning, new)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –º–∏–Ω—É—Ç—É
- **–¢–∏–ø**: Gauge (–Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è)

### 4. **Bot Response Time by Tariff** - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–ú–µ—Ç—Ä–∏–∫–∞**: `bot_response_time_seconds_by_tariff`
- **–õ–µ–π–±–ª—ã**: `user_tariff` (free, premium), `message_type` (text, voice, button)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞ –ø–æ —Ç–∏–ø–∞–º —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ç–∞—Ä–∏—Ñ–∞–º
- **–¢–∏–ø**: Histogram

### 5. **Bot Error Rate by Tariff** - –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- **–ú–µ—Ç—Ä–∏–∫–∞**: `bot_error_rate_by_tariff`
- **–õ–µ–π–±–ª—ã**: `user_tariff` (free, premium), `error_type` (api_error, processing_error, timeout)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ –±–æ—Ç–∞ –ø–æ —Ç–∏–ø–∞–º –∏ —Ç–∞—Ä–∏—Ñ–∞–º
- **–¢–∏–ø**: Gauge (–Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è)

## üîß –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫

```go
// –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
RecordUserConversion("free", "basic")
SetUserRetentionRate("daily", 0.85)
SetUserARPU("daily", 150.0)
SetUserChurnRate("daily", 0.05)
RecordUserSessionDuration("premium", 15*time.Minute)

// –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ (–±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è)
SetBotUsageRate("free", "message", 15.5)
SetFeatureUsageRate("premium", "voice_processing", 8.5)
SetUserEngagementRate("premium", "active", 18.9)
RecordBotResponseTimeByTariff("premium", "voice", 2500*time.Millisecond)
SetBotErrorRateByTariff("free", "api_error", 0.05)
```

## üìä –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥—É

- **Grafana**: http://localhost:3000 (admin/admin)
- **–î–∞—à–±–æ—Ä–¥**: "AI TG Writer - Business Metrics"
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ö–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **–ü–µ—Ä–∏–æ–¥**: –ü–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ **Rate-based –º–µ—Ç—Ä–∏–∫–∏** (–±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è):
- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç **–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç—É**
- –ù–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

### ‚úÖ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ Free vs Premium**:
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

### ‚úÖ **–ë–∏–∑–Ω–µ—Å-—Ñ–æ–∫—É—Å**:
- –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ —É–¥–µ—Ä–∂–∞–Ω–∏–µ
- ARPU –∏ –æ—Ç—Ç–æ–∫
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

### 1. **–ê–Ω–∞–ª–∏–∑ —Ä–æ—Å—Ç–∞**:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π free ‚Üí premium
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–Ω–∞–ª–∏–∑ ARPU –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º

### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞**:
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º

### 3. **–£–ª—É—á—à–µ–Ω–∏–µ UX**:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- Rate-based –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∞ –Ω–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ free vs premium –ø–æ–º–æ–≥–∞–µ—Ç –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π
- –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è —Ä–æ—Å—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
